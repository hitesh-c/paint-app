(this.webpackJsonpwhiteboard=this.webpackJsonpwhiteboard||[]).push([[0],{21:function(e,t,r){},22:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(1),o=r.n(n),u=r(14),a=r.n(u),i=r(3),s=r(13),l=r(4),d=(r(21),function(e){var t=e.canvasRef,r=e.width,n=r?r/2:0,o='url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23000000" opacity="0.3" height="'.concat(r,'" viewBox="0 0 ').concat(r," ").concat(r,'" width="').concat(r,'"><circle cx="').concat(n,'" cy="').concat(n,'" r="').concat(n,'" fill="%23000000" /></svg>\') ').concat(n," ").concat(n,", auto");return Object(c.jsx)("section",{children:Object(c.jsx)("canvas",{style:{cursor:o},ref:t})})}),b=(r(22),function(e){var t=e.handleDownload,r=e.dataUrl,n=(e.init,function(){var e=window.confirm("Do you want to save ?");console.log(r.current),e&&function(){console.log("downloading",r.current);var e=document.createElement("a");e.href=r.current,e.download="image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()});return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"topnav",style:{width:window.innerWidth},children:[Object(c.jsx)("a",{className:"active",children:"WHITEBOARD"}),Object(c.jsx)("a",{href:"http://hitesh-c.github.io/compiler",target:"_blank",children:"Compiler"}),Object(c.jsx)("a",{onClick:function(){t(),n()},href:r.current,children:"Save"}),Object(c.jsx)("a",{href:"https://github.com/hitesh-c/whiteboard",children:"Info"})]})})}),j=r(9),h=r(7),O=(r(28),function(e){var t=e.handleClear,r=e.handleEraserMode,n=e.handleRegularMode,o=e.handleColor,u=e.handleWidth,a=e.handleUndo,i=e.handleRedo,s=e.handleLineMode,l=e.handleRectMode,d=e.isRegularMode,b=e.isEraser,O=e.isRect,f=e.isLine,v=e.undo,g=e.redo;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"toolbar",children:[Object(c.jsx)("button",{className:"btn btn--block",disabled:0===v,onClick:a,children:"Undo"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:"btn btn--block",disabled:0===g,onClick:i,children:"Redo"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:"btn btn--block",onClick:t,children:"Clear"}),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"tool-section tool-section--lrg tool-container",children:[Object(c.jsx)("div",{className:"tool-section",children:Object(c.jsx)("small",{children:Object(c.jsx)("strong",{children:"Tools"})})}),Object(c.jsxs)("div",{className:"tool-grid tool-section tool-section--lrg",children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn--tool ".concat(d.current&&!b?"btn--active":""),onClick:n,children:Object(c.jsx)(h.a,{icon:j.b})})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn--tool ".concat(b?"btn--active":""),onClick:r,children:Object(c.jsx)(h.a,{icon:j.a})})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn--tool ".concat(O?"btn--active":""),onClick:l,children:Object(c.jsx)(h.a,{icon:j.d})})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn--tool ".concat(f?"btn--active":""),onClick:s,children:Object(c.jsx)(h.a,{icon:j.c})})})]}),Object(c.jsxs)("div",{className:"tool-section tool-section--lrg",children:[Object(c.jsx)("div",{className:"tool-section",children:Object(c.jsx)("small",{children:Object(c.jsx)("strong",{children:"Brush size"})})}),Object(c.jsx)("div",{className:"tool-section",children:Object(c.jsx)("input",{defaultValue:"15",type:"range",min:"5",max:"90",onChange:u})})]}),Object(c.jsx)("div",{className:"tool-section",children:Object(c.jsx)("small",{children:Object(c.jsx)("strong",{children:"Select Color"})})}),Object(c.jsx)("input",{className:"btn--color",type:"color",id:"toolColorPicker",onChange:o})]})}),Object(c.jsx)("div",{})]})})}),f=r(12),v=r(5),g=function(){var e,t=Object(n.useRef)(),r=Object(n.useState)(!1),c=Object(l.a)(r,2),o=c[0],u=c[1],a=Object(n.useState)(!1),s=Object(l.a)(a,2),d=s[0],b=s[1],j=Object(n.useState)(!1),h=Object(l.a)(j,2),O=h[0],g=h[1],x=Object(n.useState)(!1),m=Object(l.a)(x,2),R=m[0],w=m[1],k=Object(n.useState)("#000000"),p=Object(l.a)(k,2),C=p[0],y=p[1],N=Object(n.useState)(50),E=Object(l.a)(N,2),S=E[0],T=E[1],M=Object(n.useRef)({}),W=Object(n.useRef)({}),L=Object(n.useRef)(0),X=Object(n.useRef)(0),Y=Object(n.useRef)("#000000"),P=Object(n.useRef)(5),D=Object(n.useRef)(0),U=Object(n.useRef)(0),B=Object(n.useRef)(!1),F=Object(n.useRef)(!0),I=Object(n.useRef)(!1),J=Object(n.useRef)(!1),z=Object(n.useRef)(!1),A=Object(n.useRef)(!0),H=Object(n.useRef)(null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getContext("2d")),V=Object(n.useRef)();console.log("custom hook called");var _=function(e){var t=[e.offsetX,e.offsetY];D.current=t[0],U.current=t[1];var r=e.offsetX,c=e.offsetY,n=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current+1,[]));n[L.current+1].push({offsetX:r,offsetY:c}),M.current=n,L.current=L.current+1,B.current=!0},q=function(e){B.current&&H.current&&((F.current||I.current)&&(H.current.strokeStyle=Y.current,y(Y.current),H.current.lineWidth=P.current,I.current?H.current.globalCompositeOperation="destination-out":H.current.globalCompositeOperation="source-over"),function(e){if(B){var r=e.offsetX,c=e.offsetY;if(H&&H.current){if(A.current){console.log("Drawing"),H.current.beginPath(),H.current.moveTo(D.current,U.current),H.current.lineTo(r,c),H.current.stroke();var n=[r,c];D.current=n[0],U.current=n[1]}if(J.current){var o=r-V.current.left,u=c-V.current.top;H.current.clearRect(0,0,t.current.width,t.current.height),H.current.beginPath(),H.current.strokeRect(r,c,o,u),console.log("stroking rect");var a=[r,c];D.current=a[0],U.current=a[1]}z.current&&(console.log("inside line"),H.current.clearRect(0,0,t.current.width,t.current.height),H.current.beginPath(),H.current.moveTo(r,c),H.current.lineTo(D.current,U.current),H.current.stroke());var s=Object(i.a)({},M.current);s[L.current].push({offsetX:r,offsetY:c}),M.current=s}}}(e))},G=function(){B.current=!1};return[{canvas:t,isReady:o,currentWidth:S,currentColor:C,isRegularMode:A,isEraser:d,isRect:O,isLine:R,undo:L,redo:X},{init:function(){var e,r;(H.current=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getContext("2d"),t&&t.current&&H&&H.current)&&(t.current.addEventListener("mousedown",_),t.current.addEventListener("mousemove",q),t.current.addEventListener("mouseup",G),t.current.addEventListener("mouseout",G),t.current.width="1000",t.current.height="500",V.current=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),H.current.strokeStyle="#000",H.current.lineJoin="round",H.current.lineCap="round",H.current.lineWidth=6,u(!0),T(15))},handleRegularMode:function(){F.current=!0,A.current=!0,b(!1),g(!1),w(!1),z.current=!1,J.current=!1,I.current=!1},handleColor:function(e){y(e.currentTarget.value),Y.current=e.currentTarget.value,I.current=!1},handleWidth:function(e){T(e.currentTarget.value),P.current=e.currentTarget.value},handleClear:function(){H&&H.current&&t&&t.current&&H.current.clearRect(0,0,t.current.width,t.current.height)},handleEraserMode:function(){I.current=!0,b(!0),g(!1),A.current=!0,w(!1),z.current=!1,J.current=!1,F.current=!0},handleUndo:function(){if(L.current>0){var e=M.current[L.current];if(e&&0===e.length)return L.current=L.current+1,void(X.current=X.current-1);H.current.strokeStyle="white",H.current.beginPath(),H.current.lineWidth=P.current+1,H.current.moveTo(e[0].offsetX,e[0].offsetY),e.forEach((function(e,t){0!==t&&(H.current.lineTo(e.offsetX,e.offsetY),H.current.stroke())})),H.current.closePath(),H.current.strokeStyle="black";var t=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current,[])),r=Object(i.a)(Object(i.a)({},W.current),{},Object(v.a)({},X.current+1,Object(f.a)(e)));L.current=L.current-1,X.current=X.current+1,W.current=r,M.current=t}},handleRedo:function(){if(X.current>0){var e=W.current[X.current];if(e&&0===e.length)return L.current=L.current+1,void(X.current=X.current-1);H.current.strokeStyle="black",H.current.beginPath(),H.current.lineWidth=P.current,H.current.moveTo(e[0].offsetX,e[0].offsetY),e.forEach((function(e,t){0!==t&&(H.current.lineTo(e.offsetX,e.offsetY),H.current.stroke())})),H.current.closePath();var t=Object(i.a)(Object(i.a)({},W.current),{},Object(v.a)({},X.current,[]));W.current=t;var r=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current+1,Object(f.a)(e)));M.current=r}},handleRectMode:function(){J.current=!0,g(!0),A.current=!1,w(!1),b(!1),z.current=!1,F.current=!0,I.current=!1},handleLineMode:function(){w(!0),z.current=!0,F.current=!0,g(!1),A.current=!1,w(!1),b(!1),J.current=!1}}]},x=function(){var e=Object(n.useRef)("#"),t=g(),r=Object(l.a)(t,2),o=r[0],u=o.canvas,a=(o.isReady,Object(s.a)(o,["canvas","isReady"])),j=r[1],h=j.init,f=Object(s.a)(j,["init"]),v=Object(n.useCallback)((function(){console.log("download called",e.current),u&&u.current&&(e.current=u.current.toDataURL("image/png"),console.log("download called",e.current))}),[u]);console.log("rerender");var x=Object(i.a)(Object(i.a)(Object(i.a)({},a),f),{},{dataUrl:e,handleDownload:v}),m=Object(i.a)(Object(i.a)(Object(i.a)({},a),{},{init:h},f),{},{dataUrl:e,handleDownload:v});return Object(n.useEffect)((function(){h()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b,Object(i.a)({},m)),Object(c.jsx)(O,Object(i.a)({},x)),Object(c.jsx)(d,{width:a.currentWidth,canvasRef:u})]})};r(29);a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.0c6260d1.chunk.js.map