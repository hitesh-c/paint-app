{"version":3,"sources":["components/canvas/Canvas.tsx","components/navbar/Navbar.tsx","components/toolbar/Toolbar.tsx","hooks/useDraw.ts","App.tsx","index.tsx"],"names":["Canvas","canvasRef","width","widthHalf","cursor","style","ref","Navbar","handleDownload","dataUrl","init","handleNew","save","window","confirm","console","log","current","a","document","createElement","href","download","body","appendChild","click","removeChild","className","innerWidth","onClick","Toolbar","handleClear","handleEraserMode","handleRegularMode","handleColor","handleWidth","handleUndo","handleRedo","handleLineMode","handleRectMode","isRegularMode","isEraser","isRect","isLine","undo","redo","disabled","icon","faPaintBrush","faEraser","faSquare","faPen","defaultValue","type","min","max","onChange","id","useDraw","canvas","useRef","useState","isReady","setIsReady","setIsEraser","setIsRect","setIsLine","currentColor","setCurrentColor","currentWidth","setCurrentWidth","undoSteps","redoStep","selectedColor","selectedLineWidth","lastX","lastY","isDrawing","isRegularPaintMode","isEraserMode","isRectMode","isLineMode","ctx","getContext","ctxOverlay","handleMouseDown","e","offsetX","offsetY","temp","push","drawNormal","strokeStyle","lineWidth","globalCompositeOperation","nativeEvent","beginPath","moveTo","lineTo","stroke","left","height","top","clearRect","strokeRect","drawOnCanvas","stopDrawing","addEventListener","prompt","alert","getBoundingClientRect","lineJoin","lineCap","currentTarget","value","data","length","forEach","item","index","closePath","te","App","state","api","useCallback","toDataURL","toolbarProps","navbarProps","useEffect","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.be956948.chunk.js","sourcesContent":["import React from \"react\";\nimport './style.css'\n\ninterface Props {\n  canvasRef?: React.MutableRefObject<HTMLCanvasElement | undefined>;\n  width?: number;\n}\n\nexport const Canvas: React.FC<Props> = ({ canvasRef, width }) => {\n  const widthHalf = width ? width / 2 : 0;\n  const cursor = `url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"%23000000\" opacity=\"0.3\" height=\"${width}\" viewBox=\"0 0 ${width} ${width}\" width=\"${width}\"><circle cx=\"${widthHalf}\" cy=\"${widthHalf}\" r=\"${widthHalf}\" fill=\"%23000000\" /></svg>') ${widthHalf} ${widthHalf}, auto`;\n\n  return (\n    <section>\n      <canvas style={{ cursor }} ref={canvasRef as any} />\n    </section>\n  );\n};\n","import React from 'react';\r\nimport './Navbar.css';\r\n\r\nconst Navbar: React.FC<any> = ({\r\n    handleDownload,\r\n    dataUrl,\r\n    init,\r\n  \r\n  }) => {\r\n\r\n    const download=()=>{\r\n      console.log('downloading', dataUrl.current);\r\n        const a = document.createElement('a');\r\n        a.href = dataUrl.current;\r\n        a.download = \"image.png\";\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    }\r\n\r\n    const handleNew = () =>{\r\n      const save = window.confirm(\"Do you want to save ?\");\r\n      console.log(dataUrl.current);\r\n      if(save){\r\n        download();\r\n            }\r\n    }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"topnav\" style = {{ width : window.innerWidth }}>\r\n        <a className=\"active\" >\r\n         PAINT \r\n        </a>\r\n        <a \r\n          onClick={ ()=>{\r\n            handleDownload();\r\n            handleNew();\r\n            init();\r\n          }}\r\n          \r\n        >New\r\n        </a>\r\n\r\n        <a\r\n          onClick={ ()=>{\r\n            handleDownload();\r\n            handleNew();\r\n          }}\r\n          href={dataUrl.current}\r\n        >\r\n          Save\r\n        </a>\r\n        <a href=\"https://github.com/hitesh-c/paint-app\">Info</a>\r\n      </div>\r\n      </>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import {\n  faEraser,\n  faPaintBrush,\n  faPen,\n  faSquare,\n\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from 'react';\n\nimport './Toolbar.css';\n\nexport const Toolbar: React.FC<any> = ({\n  handleClear,\n  handleEraserMode,\n  handleRegularMode,\n  handleColor,\n  handleWidth,\n  handleUndo,\n  handleRedo,\n  handleLineMode,\n  handleRectMode,\n  isRegularMode,\n  isEraser,\n  isRect,\n  isLine,\n  undo,\n  redo,\n  \n}) => {\n  return (\n    <>\n    <div className= \"toolbar\">\n    <button className=\"btn btn--block\"  disabled={undo === 0}onClick={handleUndo}>\n          Undo\n        </button>\n        <br></br>\n        <button className=\"btn btn--block\"  disabled={redo === 0} onClick={handleRedo}>\n          Redo\n        </button>\n        <br></br>\n        <button className=\"btn btn--block\" onClick={handleClear}>\n          Clear\n        </button>\n      \n      <div>\n\n        <div className=\"tool-section tool-section--lrg tool-container\">       \n\n\n        <div className=\"tool-section\">\n          <small>\n            <strong>Tools</strong>\n          </small>\n        </div>\n\n\n        {/* paint brush */}\n        <div className=\"tool-grid tool-section tool-section--lrg\">\n          <div>\n            <button\n              className={`btn btn--tool ${\n                isRegularMode.current && !isEraser ? \"btn--active\" : \"\"\n              }`}\n              onClick={handleRegularMode}\n             \n            >\n              <FontAwesomeIcon icon={faPaintBrush} />\n            </button>\n          </div>\n\n          {/* eraser */}\n          <div>\n            <button\n              className={`btn btn--tool ${\n                isEraser ? \"btn--active\" : \"\"\n              }`}\n              onClick={handleEraserMode}\n             \n            >\n             <FontAwesomeIcon icon={faEraser} />\n            </button>\n          </div>\n\n           {/* rectangle */}    \n          <div>\n            <button\n              className={`btn btn--tool ${\n                isRect ? \"btn--active\" : \"\"\n              }`}\n              onClick={handleRectMode}\n              \n            >\n              <FontAwesomeIcon icon={faSquare} />\n            </button>\n          </div>\n\n           {/* line */}    \n           <div>\n            <button\n              className={`btn btn--tool ${\n                isLine ? \"btn--active\" : \"\"\n              }`}\n              onClick={handleLineMode}\n             \n            >\n              <FontAwesomeIcon icon={faPen} />\n            </button>\n          </div>\n\n        </div>\n        \n          <div className=\"tool-section tool-section--lrg\">\n            <div className=\"tool-section\">\n              <small>\n                <strong>Brush size</strong>\n              </small>\n            </div>\n            <div className=\"tool-section\">\n              <input\n                defaultValue=\"15\"\n                type=\"range\"\n                min=\"10\"\n                max=\"90\"\n                onChange={handleWidth}\n              />\n            </div>\n          </div>\n        \n        {/* { (\n          <div className=\"tool-section tool-section--lrg\"></div>\n        )} */}\n\n         {/* color */}\n         <div className=\"tool-section\">\n            <small>\n              <strong>Select Color</strong>\n            </small>\n          </div>\n          <input\n            className=\"btn--color\"\n            type=\"color\"\n            id=\"toolColorPicker\"\n            onChange={handleColor}\n          />\n        </div>\n      </div>\n\n      \n\n\n      <div>\n      </div>\n    </div>\n    </>\n  );\n};\n","import { useRef, useState } from 'react';\n\nexport const useDraw = () => {\n  const canvas = useRef<HTMLCanvasElement>() as any;\n  const [isReady, setIsReady] = useState(false);\n  const [isEraser, setIsEraser] = useState(false);\n  const [isRect, setIsRect] = useState(false);\n  const [isLine, setIsLine] = useState(false);\n\n  const [currentColor, setCurrentColor] = useState(\"#000000\");\n  const [currentWidth, setCurrentWidth] = useState(50);\n\n  const undoSteps = useRef({}) as any;\n  const redoStep = useRef({}) as any;\n  const undo = useRef(0);\n  const redo = useRef(0);\n\n  const selectedColor = useRef(\"#000000\");\n  const selectedLineWidth = useRef(10);\n  const lastX = useRef(0);\n  const lastY = useRef(0);\n  const isDrawing = useRef(false);\n  const isRegularPaintMode = useRef(true);\n  const isEraserMode = useRef(false);\n  const isRectMode = useRef(false);\n  const isLineMode = useRef(false);\n  const isRegularMode = useRef(true);\n\n  const ctx: any = useRef(canvas?.current?.getContext(\"2d\"));\n  const ctxOverlay: any = useRef();\n  console.log('custom hook called');\n\n  const drawOnCanvas = (nativeEvent: any) => {\n    if (!isDrawing) {\n      return;\n    }\n    const { offsetX, offsetY } = nativeEvent;\n\n    if (!ctx || !ctx.current) {\n      return;\n    }\n\n    if(isRegularMode.current){\n      console.log(\"Drawing\");\n      ctx.current.beginPath();\n      ctx.current.moveTo(lastX.current, lastY.current);\n      ctx.current.lineTo(offsetX, offsetY);\n      ctx.current.stroke();\n      [lastX.current, lastY.current] = [offsetX, offsetY];\n\n    }\n    // console.log(isRectMode)\n\n     if(isRectMode.current){\n      // console.log(ctx.current)\n      // ctx.current.clearRect(0, 0, , 480);\n      let width =    (offsetX-ctxOverlay.current.left);\n       let height =  (offsetY-ctxOverlay.current.top); \n      //  ctx.current.clearRect(lastX.current-1,lastY.current-1, width, height);\n       ctx.current.clearRect(0,0, canvas.current.width, canvas.current.height);\n       ctx.current.beginPath();\n       ctx.current.strokeRect(offsetX, offsetY, width, height);\n      console.log('stroking rect');\n       [lastX.current, lastY.current] = [offsetX, offsetY];\n      //  let lastWidth= width;\n      //  let lastHeight= height;\n      //  ctx.current.clearRect(offsetX,offsetY, lastWidth+10, lastHeight+10);\n      //todo\n      // ctx.current.stroke();\n    }\n    \n    if(isLineMode.current){\n      console.log('inside line');\n      ctx.current.clearRect(0,0, canvas.current.width, canvas.current.height);\n      ctx.current.beginPath();\n      ctx.current.moveTo(offsetX, offsetY);\n      ctx.current.lineTo(lastX.current, lastY.current);\n      ctx.current.stroke();\n    }\n\n    \n    // console.log(undo, undoSteps)\n    const temp = {\n      ...undoSteps.current,\n    } as any;\n\n    temp[undo.current].push({ offsetX, offsetY }) as any;\n    undoSteps.current = temp;\n    // console.log(undoSteps);\n  };\n\n  const handleMouseDown = (e: any) => {\n    [lastX.current, lastY.current] = [e.offsetX, e.offsetY];\n    const { offsetX, offsetY } = e;\n    const temp = {\n      ...undoSteps.current,\n      [undo.current + 1]: [],\n    };\n    temp[undo.current + 1].push({ offsetX, offsetY });\n    // console.log(undo, undoSteps.current) \n    undoSteps.current = temp;\n    undo.current = undo.current + 1;\n    // console.log(undo, undoSteps.current)\n    isDrawing.current = true;\n  };\n\n  const handleUndo = () => {\n    // console.log('undo called', undoSteps.current)\n    if (undo.current > 0) {\n      const data = undoSteps.current[undo.current];\n      if (data && data.length === 0) {\n        // console.log(data);\n        undo.current = undo.current + 1;\n        redo.current = redo.current - 1;\n        return;\n      }\n      // console.log('undo called', data)\n      ctx.current.strokeStyle = \"white\";\n      ctx.current.beginPath();\n      ctx.current.lineWidth = selectedLineWidth.current + 1;\n      ctx.current.moveTo(data[0].offsetX, data[0].offsetY);\n      data.forEach((item: any, index: number) => {\n        if (index !== 0) {\n          ctx.current.lineTo(item.offsetX, item.offsetY);\n          ctx.current.stroke();\n        }\n      });\n      ctx.current.closePath();\n      ctx.current.strokeStyle = \"black\";\n      const temp = {\n        ...undoSteps.current,\n        [undo.current]: [],\n      };\n      const te = {\n        ...redoStep.current,\n        [redo.current + 1]: [...data],\n      };\n      undo.current = undo.current - 1;\n      redo.current = redo.current + 1;\n      redoStep.current = te;\n      undoSteps.current = temp;\n    }\n  };\n\n  const handleRedo = () => {\n    if (redo.current > 0) {\n      const data = redoStep.current[redo.current];\n      if (data && data.length === 0) {\n        // console.log(data);\n        undo.current = undo.current + 1;\n        redo.current = redo.current - 1;\n        return;\n      }\n      // console.log(\"redo called\", data);\n\n      ctx.current.strokeStyle = \"black\";\n      ctx.current.beginPath();\n      ctx.current.lineWidth = selectedLineWidth.current;\n      ctx.current.moveTo(data[0].offsetX, data[0].offsetY);\n      data.forEach((item: any, index: number) => {\n        if (index !== 0) {\n          ctx.current.lineTo(item.offsetX, item.offsetY);\n          ctx.current.stroke();\n        }\n      });\n\n      ctx.current.closePath();\n      const temp = {\n        ...redoStep.current,\n        [redo.current]: [],\n      };\n\n      redoStep.current = temp;\n      const te = {\n        ...undoSteps.current,\n        [undo.current + 1]: [...data],\n      };\n\n      undoSteps.current = te;\n    }\n  };\n\n  const drawNormal = (e: any) => {\n    if (!isDrawing.current || !ctx.current) return;\n\n    if (isRegularPaintMode.current || isEraserMode.current) {\n      \n      ctx.current.strokeStyle = selectedColor.current;\n\n      setCurrentColor(selectedColor.current);\n      ctx.current.lineWidth = selectedLineWidth.current;\n      // console.log(isEraserMode.current)\n      isEraserMode.current\n        ? (ctx.current.globalCompositeOperation = \"destination-out\")\n        : (ctx.current.globalCompositeOperation = \"source-over\");\n\n    }\n\n    drawOnCanvas(e);\n  };\n\n  const stopDrawing = () => {\n    isDrawing.current = false;\n  };\n\n  const init = () => {\n\n    ctx.current = canvas?.current?.getContext(\"2d\");\n    if (canvas && canvas.current && ctx && ctx.current) {\n      canvas.current.addEventListener(\"mousedown\", handleMouseDown);\n      canvas.current.addEventListener(\"mousemove\", drawNormal);\n      canvas.current.addEventListener(\"mouseup\", stopDrawing);\n      canvas.current.addEventListener(\"mouseout\", stopDrawing);\n\n      const width = prompt('Please enter canvas width')\n      const height = prompt('Please enter canvas height')\n      if(width && height) {\n      canvas.current.width = width;\n      canvas.current.height = height;\n     }\n     else { \n       window.alert('Cant initialise with empty dimensions, try again later.');\n       return;\n     }\n       \n      ctxOverlay.current= canvas.current?.getBoundingClientRect()\n\n      ctx.current.strokeStyle = \"#000\";\n      ctx.current.lineJoin = \"round\";\n      ctx.current.lineCap = \"round\";\n      ctx.current.lineWidth = 10;\n      setIsReady(true);\n      setCurrentWidth(15);\n      // console.log(\"init called\");\n    }\n  };\n\n  const handleColor = (e: any) => {\n    setCurrentColor(e.currentTarget.value);\n    selectedColor.current = e.currentTarget.value;\n    isEraserMode.current=false;\n  };\n\n  const handleWidth = (e: any) => {\n    setCurrentWidth(e.currentTarget.value);\n    selectedLineWidth.current = e.currentTarget.value;\n  };\n\n  const handleClear = () => {\n    if (!ctx || !ctx.current || !canvas || !canvas.current) {\n      return;\n    }\n    ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n  };\n\n  const handleRegularMode = () => {\n    isRegularPaintMode.current = true;\n    isRegularMode.current=true;\n    \n    setIsEraser(false);\n    setIsRect(false);\n    setIsLine(false);\n    isLineMode.current = false;\n    isRectMode.current=false;\n    isEraserMode.current = false;\n    \n  };\n\n  const handleEraserMode = () => {\n    isEraserMode.current = true;\n    setIsEraser(true);\n   \n\n    setIsRect(false);\n    isRegularMode.current=true;\n    setIsLine(false);\n    isLineMode.current = false;\n    isRectMode.current=false;\n    isRegularPaintMode.current =true;\n  };\n\n  const handleRectMode = () => {  \n    isRectMode.current = true;\n    setIsRect(true);\n\n    isRegularMode.current=false;\n    setIsLine(false);\n    setIsEraser(false);\n    isLineMode.current = false;\n    isRegularPaintMode.current = true;\n    isEraserMode.current = false;\n    // console.log('rect called', isLineMode.current,\n    // isEraserMode.current)\n  };\n\n  const handleLineMode = () => {\n\n    setIsLine(true);\n    isLineMode.current = true;\n    isRegularPaintMode.current=true\n\n    setIsRect(false);\n    isRegularMode.current=false;\n    setIsLine(false);\n    setIsEraser(false);\n    isRectMode.current=false;\n  \n   \n\n  };\n\n  return [\n    {\n      canvas,\n      isReady,\n      currentWidth,\n      currentColor,\n      isRegularMode,\n      isEraser,\n      isRect,\n      isLine,\n      undo,\n      redo,\n    },\n    {\n      init,\n      handleRegularMode,\n      handleColor,\n      handleWidth,\n      handleClear,\n      handleEraserMode,\n      handleUndo,\n      handleRedo,\n      handleRectMode,\n      handleLineMode,\n    },\n  ] as any;\n};\n","import { useCallback, useEffect, useRef } from 'react';\nimport { Canvas } from \"./components/canvas/Canvas\";\nimport Navbar from './components/navbar/Navbar';\nimport { Toolbar } from \"./components/toolbar/Toolbar\";\nimport { useDraw } from \"./hooks/useDraw\";\n\n\n\nconst App = () => {\n  const dataUrl = useRef('#'); \n  const [{ canvas, isReady, ...state }, { init, ...api }] = useDraw();\n\n  const handleDownload = useCallback(() => {\n    console.log('download called', dataUrl.current);\n    if (!canvas || !canvas.current) return;\n    dataUrl.current=canvas.current.toDataURL(\"image/png\");\n    console.log('download called', dataUrl.current);\n  }, [canvas]);\n  console.log('rerender');\n\n  const toolbarProps = { ...state, ...api, dataUrl, handleDownload };\n  const navbarProps = { ...state, init,...api, dataUrl, handleDownload };\n\n  //initialising \n  useEffect(()=>{\n    init();\n  },[])\n\n  return (\n    < >\n      <Navbar {...navbarProps} />\n      <Toolbar {...toolbarProps} />\n      <Canvas width={state.currentWidth} canvasRef={canvas} />\n      \n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport \"./style.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}