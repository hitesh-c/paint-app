(this["webpackJsonppaint-app"]=this["webpackJsonppaint-app"]||[]).push([[0],{21:function(e,t,r){},22:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(1),o=r.n(c),u=r(14),a=r.n(u),i=r(3),s=r(13),l=r(4),d=(r(21),function(e){var t=e.canvasRef,r=e.width,c=r?r/2:0,o='url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="%23000000" opacity="0.3" height="'.concat(r,'" viewBox="0 0 ').concat(r," ").concat(r,'" width="').concat(r,'"><circle cx="').concat(c,'" cy="').concat(c,'" r="').concat(c,'" fill="%23000000" /></svg>\') ').concat(c," ").concat(c,", auto");return Object(n.jsx)("section",{children:Object(n.jsx)("canvas",{style:{cursor:o},ref:t})})}),b=(r(22),function(e){var t=e.handleDownload,r=e.dataUrl,c=e.init,o=function(){var e=window.confirm("Do you want to save ?");console.log(r.current),e&&function(){console.log("downloading",r.current);var e=document.createElement("a");e.href=r.current,e.download="image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"topnav",style:{width:window.innerWidth},children:[Object(n.jsx)("a",{className:"active",children:"PAINT"}),Object(n.jsx)("a",{onClick:function(){t(),o(),c()},children:"New"}),Object(n.jsx)("a",{onClick:function(){t(),o()},href:r.current,children:"Save"}),Object(n.jsx)("a",{href:"https://github.com/hitesh-c/paint-app",children:"Info"})]})})}),j=r(9),h=r(7),f=(r(28),function(e){var t=e.handleClear,r=e.handleEraserMode,c=e.handleRegularMode,o=e.handleColor,u=e.handleWidth,a=e.handleUndo,i=e.handleRedo,s=e.handleLineMode,l=e.handleRectMode,d=e.isRegularMode,b=e.isEraser,f=e.isRect,O=e.isLine,v=e.undo,g=e.redo;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"toolbar",children:[Object(n.jsx)("button",{className:"btn btn--block",disabled:0===v,onClick:a,children:"Undo"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"btn btn--block",disabled:0===g,onClick:i,children:"Redo"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"btn btn--block",onClick:t,children:"Clear"}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"tool-section tool-section--lrg tool-container",children:[Object(n.jsx)("div",{className:"tool-section",children:Object(n.jsx)("small",{children:Object(n.jsx)("strong",{children:"Tools"})})}),Object(n.jsxs)("div",{className:"tool-grid tool-section tool-section--lrg",children:[Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn--tool ".concat(d.current&&!b?"btn--active":""),onClick:c,children:Object(n.jsx)(h.a,{icon:j.b})})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn--tool ".concat(b?"btn--active":""),onClick:r,children:Object(n.jsx)(h.a,{icon:j.a})})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn--tool ".concat(f?"btn--active":""),onClick:l,children:Object(n.jsx)(h.a,{icon:j.d})})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn--tool ".concat(O?"btn--active":""),onClick:s,children:Object(n.jsx)(h.a,{icon:j.c})})})]}),Object(n.jsxs)("div",{className:"tool-section tool-section--lrg",children:[Object(n.jsx)("div",{className:"tool-section",children:Object(n.jsx)("small",{children:Object(n.jsx)("strong",{children:"Brush size"})})}),Object(n.jsx)("div",{className:"tool-section",children:Object(n.jsx)("input",{defaultValue:"15",type:"range",min:"10",max:"90",onChange:u})})]}),Object(n.jsx)("div",{className:"tool-section",children:Object(n.jsx)("small",{children:Object(n.jsx)("strong",{children:"Select Color"})})}),Object(n.jsx)("input",{className:"btn--color",type:"color",id:"toolColorPicker",onChange:o})]})}),Object(n.jsx)("div",{})]})})}),O=r(12),v=r(5),g=function(){var e,t=Object(c.useRef)(),r=Object(c.useState)(!1),n=Object(l.a)(r,2),o=n[0],u=n[1],a=Object(c.useState)(!1),s=Object(l.a)(a,2),d=s[0],b=s[1],j=Object(c.useState)(!1),h=Object(l.a)(j,2),f=h[0],g=h[1],x=Object(c.useState)(!1),m=Object(l.a)(x,2),p=m[0],R=m[1],w=Object(c.useState)("#000000"),k=Object(l.a)(w,2),C=k[0],y=k[1],N=Object(c.useState)(50),S=Object(l.a)(N,2),T=S[0],E=S[1],M=Object(c.useRef)({}),P=Object(c.useRef)({}),L=Object(c.useRef)(0),W=Object(c.useRef)(0),X=Object(c.useRef)("#000000"),Y=Object(c.useRef)(10),U=Object(c.useRef)(0),D=Object(c.useRef)(0),B=Object(c.useRef)(!1),F=Object(c.useRef)(!0),I=Object(c.useRef)(!1),J=Object(c.useRef)(!1),z=Object(c.useRef)(!1),A=Object(c.useRef)(!0),V=Object(c.useRef)(null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getContext("2d")),q=Object(c.useRef)();console.log("custom hook called");var G=function(e){var t=[e.offsetX,e.offsetY];U.current=t[0],D.current=t[1];var r=e.offsetX,n=e.offsetY,c=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current+1,[]));c[L.current+1].push({offsetX:r,offsetY:n}),M.current=c,L.current=L.current+1,B.current=!0},H=function(e){B.current&&V.current&&((F.current||I.current)&&(V.current.strokeStyle=X.current,y(X.current),V.current.lineWidth=Y.current,I.current?V.current.globalCompositeOperation="destination-out":V.current.globalCompositeOperation="source-over"),function(e){if(B){var r=e.offsetX,n=e.offsetY;if(V&&V.current){if(A.current){console.log("Drawing"),V.current.beginPath(),V.current.moveTo(U.current,D.current),V.current.lineTo(r,n),V.current.stroke();var c=[r,n];U.current=c[0],D.current=c[1]}if(J.current){var o=r-q.current.left,u=n-q.current.top;V.current.clearRect(0,0,t.current.width,t.current.height),V.current.beginPath(),V.current.strokeRect(r,n,o,u),console.log("stroking rect");var a=[r,n];U.current=a[0],D.current=a[1]}z.current&&(console.log("inside line"),V.current.clearRect(0,0,t.current.width,t.current.height),V.current.beginPath(),V.current.moveTo(r,n),V.current.lineTo(U.current,D.current),V.current.stroke());var s=Object(i.a)({},M.current);s[L.current].push({offsetX:r,offsetY:n}),M.current=s}}}(e))},K=function(){B.current=!1};return[{canvas:t,isReady:o,currentWidth:T,currentColor:C,isRegularMode:A,isEraser:d,isRect:f,isLine:p,undo:L,redo:W},{init:function(){var e;if(V.current=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getContext("2d"),t&&t.current&&V&&V.current){var r;t.current.addEventListener("mousedown",G),t.current.addEventListener("mousemove",H),t.current.addEventListener("mouseup",K),t.current.addEventListener("mouseout",K);var n=prompt("Please enter canvas width"),c=prompt("Please enter canvas height");if(!n||!c)return void window.alert("Cant initialise with empty dimensions, try again later.");t.current.width=n,t.current.height=c,q.current=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),V.current.strokeStyle="#000",V.current.lineJoin="round",V.current.lineCap="round",V.current.lineWidth=10,u(!0),E(15)}},handleRegularMode:function(){F.current=!0,A.current=!0,b(!1),g(!1),R(!1),z.current=!1,J.current=!1,I.current=!1},handleColor:function(e){y(e.currentTarget.value),X.current=e.currentTarget.value,I.current=!1},handleWidth:function(e){E(e.currentTarget.value),Y.current=e.currentTarget.value},handleClear:function(){V&&V.current&&t&&t.current&&V.current.clearRect(0,0,t.current.width,t.current.height)},handleEraserMode:function(){I.current=!0,b(!0),g(!1),A.current=!0,R(!1),z.current=!1,J.current=!1,F.current=!0},handleUndo:function(){if(L.current>0){var e=M.current[L.current];if(e&&0===e.length)return L.current=L.current+1,void(W.current=W.current-1);V.current.strokeStyle="white",V.current.beginPath(),V.current.lineWidth=Y.current+1,V.current.moveTo(e[0].offsetX,e[0].offsetY),e.forEach((function(e,t){0!==t&&(V.current.lineTo(e.offsetX,e.offsetY),V.current.stroke())})),V.current.closePath(),V.current.strokeStyle="black";var t=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current,[])),r=Object(i.a)(Object(i.a)({},P.current),{},Object(v.a)({},W.current+1,Object(O.a)(e)));L.current=L.current-1,W.current=W.current+1,P.current=r,M.current=t}},handleRedo:function(){if(W.current>0){var e=P.current[W.current];if(e&&0===e.length)return L.current=L.current+1,void(W.current=W.current-1);V.current.strokeStyle="black",V.current.beginPath(),V.current.lineWidth=Y.current,V.current.moveTo(e[0].offsetX,e[0].offsetY),e.forEach((function(e,t){0!==t&&(V.current.lineTo(e.offsetX,e.offsetY),V.current.stroke())})),V.current.closePath();var t=Object(i.a)(Object(i.a)({},P.current),{},Object(v.a)({},W.current,[]));P.current=t;var r=Object(i.a)(Object(i.a)({},M.current),{},Object(v.a)({},L.current+1,Object(O.a)(e)));M.current=r}},handleRectMode:function(){J.current=!0,g(!0),A.current=!1,R(!1),b(!1),z.current=!1,F.current=!0,I.current=!1},handleLineMode:function(){R(!0),z.current=!0,F.current=!0,g(!1),A.current=!1,R(!1),b(!1),J.current=!1}}]},x=function(){var e=Object(c.useRef)("#"),t=g(),r=Object(l.a)(t,2),o=r[0],u=o.canvas,a=(o.isReady,Object(s.a)(o,["canvas","isReady"])),j=r[1],h=j.init,O=Object(s.a)(j,["init"]),v=Object(c.useCallback)((function(){console.log("download called",e.current),u&&u.current&&(e.current=u.current.toDataURL("image/png"),console.log("download called",e.current))}),[u]);console.log("rerender");var x=Object(i.a)(Object(i.a)(Object(i.a)({},a),O),{},{dataUrl:e,handleDownload:v}),m=Object(i.a)(Object(i.a)(Object(i.a)({},a),{},{init:h},O),{},{dataUrl:e,handleDownload:v});return Object(c.useEffect)((function(){h()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b,Object(i.a)({},m)),Object(n.jsx)(f,Object(i.a)({},x)),Object(n.jsx)(d,{width:a.currentWidth,canvasRef:u})]})};r(29);a.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.be956948.chunk.js.map